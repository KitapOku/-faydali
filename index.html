<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gemeindebibliothek</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Arial', sans-serif;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-900">
  <header class="bg-white shadow p-4 flex justify-between items-center">
    <h1 id="header-text" class="text-2xl font-bold">üìö Gemeindebibliothek</h1>
    <div class="flex items-center gap-4">
      <a href="https://www.instagram.com/ditibjugend.kreisunna/" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram" class="h-8 w-8">
      </a>
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=80x80&data=https://www.instagram.com/ditibjugend.kreisunna/" alt="QR Code" class="h-10 w-10">
    </div>
  </header>

  <main class="p-6">
    <section data-aos="fade-up">
      <h2 class="text-xl font-semibold mb-4">Verf√ºgbare B√ºcher</h2>
      <div id="books-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
        <!-- Dynamisch geladene B√ºcher -->
      </div>
    </section>

    <section data-aos="fade-up" class="mt-10" id="borrow-section" style="display:none">
  <h2 class="text-xl font-semibold mb-4">Buch ausleihen</h2>
 <form action="https://docs.google.com/forms/d/e/1FAIpQLSeszi7ZS-ZJwZYfqn-pqpIDJlR1H8NawEj8k3fmFqUApHuM4Q/formResponse" method="POST" target="_blank" class="space-y-4">
  <input id="book-title-input" name="entry.1234567890" type="hidden" />
    <input name="entry.38551298" type="text" placeholder="Buchtitel / Kitap adi" required class="w-full p-2 border rounded" />
  <input name="entry.975934348" type="text" placeholder="Name / Isim" required class="w-full p-2 border rounded" />
  <input name="entry.373130912" type="text" placeholder="Moschee / Gemeinde - Cami / B√∂lge" required class="w-full p-2 border rounded" />
  <input name="entry.1690679086" type="tel" placeholder="Mobilnummer / Cep Nr.:" required class="w-full p-2 border rounded" />
  <input name="entry.769733384" type="text" placeholder="F√ºr wie lange m√∂chtest du das Buch ausleihen? - Kitapi hangi s√ºre √∂d√ºnc almak istersin?" required class="w-full p-2 border rounded" />
  <p class="text-sm text-gray-600">üìå Hinweis: Verl√§ngerungen sind m√∂glich ‚Äì einfach Bescheid geben</p>
  <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Anfrage senden</button>
</form>

</section>


    <section data-aos="fade-up" class="mt-10">
      <p id="thank-you-message" class="bg-green-100 p-4 rounded text-green-800 hidden">
        Vielen Dank! Deine Anfrag wurde erfolgreich √ºbermittelt. Wir melden uns in K√ºrze bei dir.
        Tesekk√ºrler! Kisa zaman sonra sizinle iletisime gecicez :)
      </p>
    </section>
  </main>

  <footer class="bg-white p-4 mt-10 text-center text-sm text-gray-500">
    <span id="footer-text">¬© 2025 Gemeindebibliothek ‚Äì DITIB Jugend Kreis Unna - by Bahadir B√ºy√ºk</span>
  <img src="https://pplx-res.cloudinary.com/image/upload/v1749677191/gpt4o_images/jgnwbt88ilrecvnwpx5l.png" alt="Byk" class="mx-auto block w-20 h-auto mb-2" />
  </footer>
  
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    AOS.init();
  </script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-app.js";
    import { getFirestore, collection, getDocs, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBBGhn-V58ufgbSGsoL6lLONX09QJKm2sE",
      authDomain: "bibliothek-38373.firebaseapp.com",
      projectId: "bibliothek-38373",
      storageBucket: "bibliothek-38373.firebasestorage.app",
      messagingSenderId: "188405615349",
      appId: "1:188405615349:web:715db2a75ea95cc0c6d3bc",
      measurementId: "G-NR98T0L5RW"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

async function loadBooks() {
  const container = document.getElementById("books-container");
  container.innerHTML = "";

  const querySnapshot = await getDocs(collection(db, "books"));
  querySnapshot.forEach(docSnap => {
    const book = docSnap.data();
    const card = document.createElement("div");
    card.className = "bg-white p-4 rounded-xl shadow hover:shadow-md transition cursor-pointer";

    const availableFromText = book.availableFrom
      ? 'Verf√ºgbar ab: ' + new Date(book.availableFrom).toLocaleDateString("de-DE")
      : '';

    card.innerHTML = `
      <img src="${book.cover || 'https://via.placeholder.com/150x220?text=Kein+Cover'}" alt="Buchcover" class="rounded mb-2 w-full h-auto max-h-56 object-contain bg-white" />

      <h3 class="text-lg font-bold">${book.title}</h3>
      <p class="text-sm">Autor: ${book.author}</p>
      <p class="text-sm text-gray-700">${availableFromText}</p>
      <span class="inline-block mt-2 px-2 py-1 text-xs ${book.available ? 'bg-green-200 text-green-800' : 'bg-red-200 text-red-800'} rounded">
        ${book.available ? 'Verf√ºgbar' : 'Nicht verf√ºgbar'}
      </span>
    `;
  
    // Formular anzeigen und Buchtitel setzen
    card.addEventListener("click", () => {
      document.getElementById("book-title-input").value = book.title;
      document.getElementById("borrow-section").style.display = "block";
      document.getElementById("borrow-section").scrollIntoView({ behavior: "smooth" });
    });

    container.appendChild(card);
  });
}

    async function loadSiteTexts() {
      const docRef = doc(db, "settings", "siteContent");
      const docSnap = await getDoc(docRef);
      if (docSnap.exists()) {
        const data = docSnap.data();
        document.getElementById("header-text").textContent = data.headerText || "üìö Gemeindebibliothek";
        document.getElementById("footer-text").textContent = data.footerText || "¬© 2025 Gemeindebibliothek ‚Äì DITIB Jugend Kreis Unna";
        document.getElementById("thank-you-message").textContent = data.thankYouMessage || "Vielen Dank! Deine Buchungsanfrage wurde erfolgreich √ºbermittelt. Du wirst bald informiert, ob das Buch zur gew√ºnschten Zeit verf√ºgbar ist.";
      }
    }

    function showThankYouMessageIfNeeded() {
      const params = new URLSearchParams(window.location.search);
      if (params.get("success") === "1") {
        document.getElementById("thank-you-message").classList.remove("hidden");
        document.getElementById("thank-you-message").scrollIntoView({ behavior: "smooth" });
      }
    }

    // Initiale Ausf√ºhrung
    window.addEventListener("load", () => {
      loadBooks();
      loadSiteTexts();
      showThankYouMessageIfNeeded();
    });

<!-- Footer mit Link -->
<footer>
  <p>
    &copy; 2025 Meine Bibliothek |
    <a href="#" onclick="openPopup(); return false;">Datenschutzerkl√§rung</a>
  </p>
</footer>

<!-- Das Pop-up (initial versteckt) -->
<div id="datenschutzPopup" style="display:none; position:fixed; top:10%; left:50%; transform:translateX(-50%); width:80%; max-width:600px; background:#fff; border:1px solid #ccc; padding:20px; z-index:1000;">
  <h2>Datenschutzerkl√§rung</h2>
  <p>
    <Datenschutzerkl√§rung
Zuletzt aktualisiert: [Aktuelles Datum einf√ºgen]

1. Verantwortlicher und Kontaktdaten
Verantwortlich f√ºr diese Website ist:

[Bahadir B√ºy√ºk]


2. Verarbeitung personenbezogener Daten im Rahmen des Betriebs dieser Website
2.1 Automatisch erhobene Daten (Server-Logfiles)
Bei jedem Zugriff auf diese Website werden automatisch Informationen in Server-Logfiles gespeichert, die m√∂glicherweise eine Identifizierung zulassen. Folgende Daten werden hierbei erhoben:

Datum und Uhrzeit des Zugriffs

IP-Adresse des zugreifenden Rechners

Name und URL der abgerufenen Datei

Website, von der aus der Zugriff erfolgte (Referrer-URL)

Verwendeter Browser und dessen Version

Betriebssystem des zugreifenden Rechners

Name des Internet-Service-Providers

Zweck der Verarbeitung:
Die vor√ºbergehende Speicherung der IP-Adresse durch das System ist notwendig, um eine Auslieferung der Website an Ihren Rechner zu erm√∂glichen. Die Speicherung in Logfiles erfolgt zur Gew√§hrleistung der Funktionsf√§higkeit und Sicherheit der Website.

Rechtsgrundlage:
Art. 6 Abs. 1 lit. f DSGVO (berechtigtes Interesse an der ordnungsgem√§√üen Funktion und Sicherheit der Website)

Speicherdauer:
Die Daten werden gel√∂scht, sobald sie f√ºr die Erreichung des Zweckes ihrer Erhebung nicht mehr erforderlich sind, sp√§testens jedoch nach [7-14 Tage] Tagen. Eine dar√ºber hinausgehende Speicherung erfolgt nur in anonymisierter Form.

3. Webhosting
Diese Website wird bei [Name des Hosting-Anbieters] gehostet. Der Hosting-Anbieter kann in diesem Zusammenhang Server-Logfiles (siehe Punkt 2.1) speichern.

Der Hosting-Anbieter wurde sorgf√§ltig ausgew√§hlt und verarbeitet Ihre Daten in unserem Auftrag gem√§√ü Art. 28 DSGVO. Mit dem Hosting-Anbieter wurde ein Vertrag zur Auftragsverarbeitung abgeschlossen.

4. Zwecke der Datenverarbeitung
Die Verarbeitung personenbezogener Daten erfolgt ausschlie√ülich zu folgenden Zwecken:

Bereitstellung und ordnungsgem√§√üe Funktion der Website

Gew√§hrleistung der IT-Sicherheit und des Systembetriebs

Erkennung und Abwehr von Missbrauch und Angriffen

Eine Verwendung der Daten zu Marketing- oder Werbezwecken erfolgt nicht.

5. Ihre Rechte als betroffene Person
Sie haben folgende Rechte bez√ºglich Ihrer personenbezogenen Daten:

5.1 Auskunftsrecht (Art. 15 DSGVO)
Sie haben das Recht, Auskunft √ºber Ihre von uns verarbeiteten personenbezogenen Daten zu verlangen.

5.2 Berichtigungsrecht (Art. 16 DSGVO)
Sie haben das Recht, unverz√ºglich die Berichtigung Sie betreffender unrichtiger personenbezogener Daten zu verlangen.

5.3 L√∂schungsrecht (Art. 17 DSGVO)
Sie haben das Recht, die unverz√ºgliche L√∂schung Sie betreffender personenbezogener Daten zu verlangen.

5.4 Einschr√§nkungsrecht (Art. 18 DSGVO)
Sie haben das Recht, die Einschr√§nkung der Verarbeitung zu verlangen.

5.5 Widerspruchsrecht (Art. 21 DSGVO)
Sie haben das Recht, jederzeit gegen die Verarbeitung Sie betreffender personenbezogener Daten Widerspruch einzulegen.

5.6 Daten√ºbertragbarkeit (Art. 20 DSGVO)
Sie haben das Recht, die Sie betreffenden personenbezogenen Daten in einem strukturierten, g√§ngigen und maschinenlesbaren Format zu erhalten.

6. Beschwerderecht
Sie haben das Recht, sich bei einer Datenschutz-Aufsichtsbeh√∂rde √ºber unsere Verarbeitung personenbezogener Daten zu beschweren.

Zust√§ndige Aufsichtsbeh√∂rde in Deutschland ist:
Die Bundesbeauftragte f√ºr den Datenschutz und die Informationsfreiheit
Graurheindorfer Str. 153
53117 Bonn
Telefon: +49 (0)228-997799-0
E-Mail: poststelle@bfdi.bund.de

Alternativ k√∂nnen Sie sich auch an die Datenschutz-Aufsichtsbeh√∂rde Ihres Bundeslandes wenden.

7. Keine Verwendung von Cookies, Analyse-Tools oder externen Diensten
Diese Website verwendet keine Cookies, Analyse-Tools (wie Google Analytics), Social Media Plugins oder andere externe Dienste, die personenbezogene Daten verarbeiten w√ºrden.

8. Datensicherheit
Wir haben technische und organisatorische Sicherheitsma√ünahmen getroffen, um Ihre personenbezogenen Daten gegen zuf√§llige oder vors√§tzliche Manipulationen, Verlust, Zerst√∂rung oder den Zugriff unberechtigter Personen zu sch√ºtzen.

9. Kontakt f√ºr Datenschutzfragen
Bei Fragen zum Datenschutz k√∂nnen Sie sich jederzeit an uns wenden:

E-Mail: [Ihre E-Mail-Adresse]
Adresse: [Ihre Adresse]

10. √Ñnderungen dieser Datenschutzerkl√§rung
Wir behalten uns vor, diese Datenschutzerkl√§rung gelegentlich anzupassen, damit sie stets den aktuellen rechtlichen Anforderungen entspricht oder um √Ñnderungen unserer Leistungen in der Datenschutzerkl√§rung umzusetzen. F√ºr Ihren erneuten Besuch gilt dann die neue Datenschutzerkl√§rung.

Stand: [Datum einf√ºgen]

Hinweise zur Anpassung
Wichtige Hinweise f√ºr die Verwendung:

Personalisierung erforderlich: Ersetzen Sie alle Platzhalter in eckigen Klammern [...] durch Ihre tats√§chlichen Daten.

Hosting-Anbieter: Erg√§nzen Sie Informationen √ºber Ihren Hosting-Anbieter und pr√ºfen Sie, ob ein Auftragsverarbeitungsvertrag (AVV) vorhanden ist.

Speicherdauer: Passen Sie die Speicherdauer der Logfiles an die tats√§chlichen Gegebenheiten Ihres Hosting-Anbieters an (√ºblich sind 7-14 Tage).

Erweiterungen: Falls Sie sp√§ter Funktionen wie Kontaktformulare, Newsletter oder andere Dienste hinzuf√ºgen, muss die Datenschutzerkl√§rung entsprechend erweitert werden.

Rechtlicher Hinweis: Diese Vorlage ersetzt keine rechtliche Beratung. Bei Unsicherheiten sollten Sie einen Datenschutzexperten oder Rechtsanwalt konsultieren.


Firebase Hosting (Google)
Wir nutzen Firebase Hosting, einen Webhosting-Dienst der Google LLC, 1600 Amphitheatre Parkway, Mountain View, CA 94043, USA (‚ÄûGoogle") zur Bereitstellung unserer Website.

Verarbeitete Daten:

IP-Adresse der Besucher

Datum und Uhrzeit des Zugriffs

√úbertragene Datenmenge

Website, von der der Zugriff erfolgte (Referrer)

Verwendeter Browser und Betriebssystem

Zweck der Verarbeitung:
Die Datenverarbeitung erfolgt zum Zweck der Bereitstellung und Optimierung der Website sowie zur Gew√§hrleistung der Systemsicherheit.

Rechtsgrundlage:
Art. 6 Abs. 1 lit. f DSGVO (berechtigtes Interesse an der ordnungsgem√§√üen Bereitstellung der Website)

Speicherdauer:
Die Logfiles werden in der Regel nach 30 Tagen automatisch gel√∂scht.

Drittland√ºbertragung:
Google Firebase verarbeitet Daten auch in den USA. Google ist nach dem EU-US Data Privacy Framework zertifiziert und nutzt Standardvertragsklauseln f√ºr Daten√ºbertragungen.

Weitere Informationen:
Datenschutzerkl√§rung von Google: https://policies.google.com/privacy
Firebase Datenschutzhinweise: https://firebase.google.com/support/privacy
  </p>
  <button onclick="closePopup()">Schlie√üen</button>
</div>

<!-- Halbtransparenter Hintergrund -->
<div id="popupOverlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:999;" onclick="closePopup()"></div>

<script>
function openPopup() {
  document.getElementById('datenschutzPopup').style.display = 'block';
  document.getElementById('popupOverlay').style.display = 'block';
}
function closePopup() {
  document.getElementById('datenschutzPopup').style.display = 'none';
  document.getElementById('popupOverlay').style.display = 'none';
}
</script>

    
  </script>
</body>
</html>
